<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Project Configurator ‚Äî Build Filter</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="site">
    <a href="index.html" style="display:inline-block;margin-bottom:12px;color:var(--muted);text-decoration:none;">‚Üê Back</a>

    <h2 style="color:var(--primary);margin-bottom:8px;">ü™ö Project Configurator</h2>
    <p class="lead">Choose options and generate the filter line for external use.</p>

    <div class="container" style="margin-top:12px;">
      <form id="builderForm">
        <div class="form-row">
          <label class="label" for="project">What do you want to build?</label>
          <select id="project" class="input" required>
            <option value="">Select a project type...</option>
            <option value="Shelf">Shelf</option>
            <option value="Desk">Desk</option>
            <option value="Cabinet">Cabinet</option>
            <option value="PlanterBox">Planter Box</option>
            <option value="Bench">Bench</option>
            <option value="Custom">Other / Custom</option>
          </select>
        </div>

        <div class="form-row">
          <label class="label" for="wood">Select Wood Type</label>
          <select id="wood" class="input" required>
            <option value="">Choose material...</option>
            <option>Pine</option><option>Oak</option><option>Maple</option>
            <option>Birch</option><option>MDF</option><option>Plywood</option>
          </select>
        </div>

        <div class="form-row">
          <label class="label">Do you want to use screws?</label>
          <div style="display:flex;gap:12px;">
            <label style="display:flex;gap:8px;align-items:center;">
              <input type="radio" name="screws" value="yes" required> Yes
            </label>
            <label style="display:flex;gap:8px;align-items:center;">
              <input type="radio" name="screws" value="no"> No (glue/joints)
            </label>
          </div>
        </div>

        <div class="form-row grid-3">
          <div>
            <label class="label" for="height">Height (in)</label>
            <input id="height" class="input" type="number" min="1" placeholder="H" required>
          </div>
          <div>
            <label class="label" for="width">Width (in)</label>
            <input id="width" class="input" type="number" min="1" placeholder="W" required>
          </div>
          <div>
            <label class="label" for="length">Length (in)</label>
            <input id="length" class="input" type="number" min="1" placeholder="L" required>
          </div>
        </div>

        <div style="margin-top:10px;">
          <button class="btn" type="submit" id="generateBtn">Generate Filter Line</button>
        </div>
      </form>

      <div id="resultArea" class="result hidden" style="margin-top:14px;">
        <button id="copyBtn" class="copy-btn">Copy</button>
        <div id="filterOutput"></div>
        <div id="copyMessage" style="color:green;margin-top:8px;font-weight:700;display:none;">Copied!</div>
      </div>

      <div id="errorBox" class="container hidden" style="margin-top:12px;border-left:4px solid #fca5a5;background:#fff7f7;color:#9f1239;">
        <strong>Oops:</strong> <span id="errorText">Please fill out all required fields.</span>
      </div>
    </div>
  </div>

<script>
  (function(){
    const form = document.getElementById('builderForm');
    const resultArea = document.getElementById('resultArea');
    const filterOutput = document.getElementById('filterOutput');
    const copyBtn = document.getElementById('copyBtn');
    const copyMessage = document.getElementById('copyMessage');
    const errorBox = document.getElementById('errorBox');
    const errorText = document.getElementById('errorText');

    form.addEventListener('submit', (ev)=> {
      ev.preventDefault();
      errorBox.classList.add('hidden');

      const project = document.getElementById('project').value.trim();
      const wood = document.getElementById('wood').value.trim();
      const screwsEl = document.querySelector('input[name="screws"]:checked');
      const height = document.getElementById('height').value.trim();
      const width = document.getElementById('width').value.trim();
      const length = document.getElementById('length').value.trim();

      if(!project || !wood || !screwsEl || !height || !width || !length) {
        errorText.textContent = 'Please fill out all required fields.';
        errorBox.classList.remove('hidden');
        resultArea.classList.add('hidden');
        return;
      }

      // Build filter line
      const filterLine = `project=${project}; screws=${screwsEl.value}; wood=${wood}; height=${height}in; width=${width}in; length=${length}in`;
      filterOutput.textContent = filterLine;
      resultArea.classList.remove('hidden');
      copyMessage.style.display = 'none';
    });

    copyBtn.addEventListener('click', async () => {
      const text = filterOutput.textContent;
      if(!text) return;
      try {
        await navigator.clipboard.writeText(text);
        copyMessage.style.display = 'block';
        setTimeout(()=> copyMessage.style.display = 'none', 2200);
      } catch (err) {
        // fallback
        const ta = document.createElement('textarea');
        ta.value = text;
        document.body.appendChild(ta);
        ta.select();
        document.execCommand('copy');
        document.body.removeChild(ta);
        copyMessage.style.display = 'block';
        setTimeout(()=> copyMessage.style.display = 'none', 2200);
      }
    });
  })();
</script>
</body>
</html>
